import{r as p,j as t}from"./index-DQiy-OUL.js";import{g as v,b as C,u as T,s as j,d as m,e as w,m as $,f,B as N,T as H,P,a as V}from"./Paper-BO-NLJZ9.js";const F=p.createContext();function X(e){return v("MuiTable",e)}C("MuiTable",["root","stickyHeader"]);const G=e=>{const{classes:o,stickyHeader:s}=e;return w({root:["root",s&&"stickyHeader"]},X,o)},K=j("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.stickyHeader&&o.stickyHeader]}})($(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:o})=>o.stickyHeader,style:{borderCollapse:"separate"}}]}))),I="table",_=p.forwardRef(function(o,s){const n=T({props:o,name:"MuiTable"}),{className:i,component:r=I,padding:d="normal",size:c="medium",stickyHeader:u=!1,...g}=n,a={...n,component:r,padding:d,size:c,stickyHeader:u},b=G(a),y=p.useMemo(()=>({padding:d,size:c,stickyHeader:u}),[d,c,u]);return t.jsx(F.Provider,{value:y,children:t.jsx(K,{as:r,role:r===I?null:"table",ref:s,className:m(b.root,i),ownerState:a,...g})})}),k=p.createContext();function Y(e){return v("MuiTableBody",e)}C("MuiTableBody",["root"]);const Z=e=>{const{classes:o}=e;return w({root:["root"]},Y,o)},ee=j("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),te={variant:"body"},A="tbody",D=p.forwardRef(function(o,s){const n=T({props:o,name:"MuiTableBody"}),{className:i,component:r=A,...d}=n,c={...n,component:r},u=Z(c);return t.jsx(k.Provider,{value:te,children:t.jsx(ee,{className:m(u.root,i),as:r,ref:s,role:r===A?null:"rowgroup",ownerState:c,...d})})});function oe(e){return v("MuiTableCell",e)}const se=C("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ae=e=>{const{classes:o,variant:s,align:n,padding:i,size:r,stickyHeader:d}=e,c={root:["root",s,d&&"stickyHeader",n!=="inherit"&&`align${f(n)}`,i!=="normal"&&`padding${f(i)}`,`size${f(r)}`]};return w(c,oe,o)},re=j("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[s.variant],o[`size${f(s.size)}`],s.padding!=="normal"&&o[`padding${f(s.padding)}`],s.align!=="inherit"&&o[`align${f(s.align)}`],s.stickyHeader&&o.stickyHeader]}})($(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?e.lighten(e.alpha(e.palette.divider,1),.88):e.darken(e.alpha(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${se.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:o})=>o.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),l=p.forwardRef(function(o,s){const n=T({props:o,name:"MuiTableCell"}),{align:i="inherit",className:r,component:d,padding:c,scope:u,size:g,sortDirection:a,variant:b,...y}=n,h=p.useContext(F),x=p.useContext(k),z=x&&x.variant==="head";let R;d?R=d:R=z?"th":"td";let M=u;R==="td"?M=void 0:!M&&z&&(M="col");const B=b||x&&x.variant,O={...n,align:i,component:R,padding:c||(h&&h.padding?h.padding:"normal"),size:g||(h&&h.size?h.size:"medium"),sortDirection:a,stickyHeader:B==="head"&&h&&h.stickyHeader,variant:B},Q=ae(O);let U=null;return a&&(U=a==="asc"?"ascending":"descending"),t.jsx(re,{as:R,ref:s,className:m(Q.root,r),"aria-sort":U,scope:M,ownerState:O,...y})});function ne(e){return v("MuiTableContainer",e)}C("MuiTableContainer",["root"]);const le=e=>{const{classes:o}=e;return w({root:["root"]},ne,o)},ie=j("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),E=p.forwardRef(function(o,s){const n=T({props:o,name:"MuiTableContainer"}),{className:i,component:r="div",...d}=n,c={...n,component:r},u=le(c);return t.jsx(ie,{ref:s,as:r,className:m(u.root,i),ownerState:c,...d})});function ce(e){return v("MuiTableHead",e)}C("MuiTableHead",["root"]);const de=e=>{const{classes:o}=e;return w({root:["root"]},ce,o)},pe=j("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),ue={variant:"head"},J="thead",L=p.forwardRef(function(o,s){const n=T({props:o,name:"MuiTableHead"}),{className:i,component:r=J,...d}=n,c={...n,component:r},u=de(c);return t.jsx(k.Provider,{value:ue,children:t.jsx(pe,{as:r,className:m(u.root,i),ref:s,role:r===J?null:"rowgroup",ownerState:c,...d})})});function ge(e){return v("MuiTableRow",e)}const W=C("MuiTableRow",["root","selected","hover","head","footer"]),be=e=>{const{classes:o,selected:s,hover:n,head:i,footer:r}=e;return w({root:["root",s&&"selected",n&&"hover",i&&"head",r&&"footer"]},ge,o)},ye=j("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.head&&o.head,s.footer&&o.footer]}})($(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${W.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${W.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)}}}))),q="tr",S=p.forwardRef(function(o,s){const n=T({props:o,name:"MuiTableRow"}),{className:i,component:r=q,hover:d=!1,selected:c=!1,...u}=n,g=p.useContext(k),a={...n,component:r,hover:d,selected:c,head:g&&g.variant==="head",footer:g&&g.variant==="footer"},b=be(a);return t.jsx(ye,{as:r,ref:s,className:m(b.root,i),role:r===q?null:"row",ownerState:a,...u})});function fe(){const[e,o]=p.useState([]),[s,n]=p.useState([]),[i,r]=p.useState(null),[d,c]=p.useState(!0),[u,g]=p.useState("");return p.useEffect(()=>{async function a(){c(!0),g("");try{const y=await(await fetch("/.netlify/functions/get-orders")).json();o(y.orders||[]),n(y.order_items||[])}catch{g("Failed to load orders.")}c(!1)}a()},[]),t.jsxs(N,{sx:{p:3},children:[t.jsx(H,{variant:"h4",gutterBottom:!0,children:"Orders Dashboard"}),u&&t.jsx(H,{color:"error",children:u}),t.jsx(E,{component:P,sx:{mb:4},children:t.jsxs(_,{children:[t.jsx(L,{children:t.jsxs(S,{children:[t.jsx(l,{children:"Order ID"}),t.jsx(l,{children:"Customer"}),t.jsx(l,{children:"Status"}),t.jsx(l,{children:"Subtotal"}),t.jsx(l,{children:"Shipping"}),t.jsx(l,{children:"Created"}),t.jsx(l,{children:"Actions"})]})}),t.jsx(D,{children:e.map(a=>t.jsxs(S,{selected:a.id===i,children:[t.jsx(l,{children:a.id}),t.jsx(l,{children:a.customer_name||a.customer_email}),t.jsx(l,{children:a.status||""}),t.jsxs(l,{children:["$",a.subtotal]}),t.jsx(l,{children:t.jsx("input",{type:"number",value:a.shipping_total??"",min:"0",step:"0.01",style:{width:80},onChange:b=>{const y=b.target.value;o(h=>h.map(x=>x.id===a.id?{...x,shipping_total:y}:x))},onBlur:async b=>{const y=b.target.value;try{await fetch("/.netlify/functions/update-order-shipping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:a.id,shipping_total:y})})}catch{}}})}),t.jsx(l,{children:a.created_at}),t.jsx(l,{children:t.jsx(V,{variant:"outlined",size:"small",onClick:()=>r(a.id),children:"View Items"})})]},a.id))})]})}),i&&t.jsxs(N,{children:[t.jsxs(H,{variant:"h6",gutterBottom:!0,children:["Order Items for Order #",i]}),t.jsx(E,{component:P,children:t.jsxs(_,{children:[t.jsx(L,{children:t.jsxs(S,{children:[t.jsx(l,{children:"Item ID"}),t.jsx(l,{children:"Product"}),t.jsx(l,{children:"Quantity"}),t.jsx(l,{children:"Unit Price"}),t.jsx(l,{children:"Total"})]})}),t.jsx(D,{children:s.filter(a=>a.order_id===i).map(a=>t.jsxs(S,{children:[t.jsx(l,{children:a.id}),t.jsx(l,{children:a.product_name||a.product_id}),t.jsx(l,{children:a.quantity}),t.jsxs(l,{children:["$",a.unit_price]}),t.jsxs(l,{children:["$",a.total]})]},a.id))})]})})]})]})}export{fe as default};
