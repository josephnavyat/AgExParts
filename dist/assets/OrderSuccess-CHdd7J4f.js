import{u as x,r as s,d as m,j as e}from"./index-BPhBAx7Z.js";import{F as g}from"./Footer-kmtp9OYe.js";function y(){const{dispatch:n}=x(),[t,o]=s.useState(null),[c,d]=s.useState(!0),[l,a]=s.useState(null),h=m(),i=new URLSearchParams(h.search).get("session_id");return s.useEffect(()=>{i&&fetch(`/.netlify/functions/get-order?order_no=${i}`).then(r=>r.ok?r.json():Promise.reject(r.statusText)).then(r=>{o(r),r&&r.items&&r.items.length>0&&n({type:"CLEAR_CART"}),d(!1)}).catch(r=>{a(r),d(!1)})},[i,n]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{minHeight:"80vh",padding:"2rem",background:"var(--bg)"},children:[e.jsx("h2",{className:"distressed gallery-title",style:{textAlign:"center",marginBottom:"2rem",marginTop:"4.5rem",color:"#222"},children:"Order Success"}),c?e.jsx("div",{style:{textAlign:"center",color:"#888"},children:"Loading order..."}):l?e.jsxs("div",{style:{textAlign:"center",color:"red"},children:["Error: ",String(l)]}):t?e.jsxs("div",{style:{maxWidth:700,margin:"0 auto",background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.10)",padding:"2rem",color:"#222"},children:[e.jsxs("h3",{children:["Order #",t.order_ref]}),e.jsxs("div",{children:[e.jsx("b",{children:"Name:"})," ",t.customer_name]}),e.jsxs("div",{children:[e.jsx("b",{children:"Email:"})," ",t.customer_email]}),e.jsxs("div",{children:[e.jsx("b",{children:"Shipping:"})," ",t.ship_address1,", ",t.ship_city,", ",t.ship_state," ",t.ship_postal_code,", ",t.ship_country]}),e.jsxs("div",{children:[e.jsx("b",{children:"Total:"})," $",t.grand_total]}),e.jsx("h4",{style:{marginTop:"2rem"},children:"Items"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.5rem",minWidth:120},children:"Product"}),e.jsx("th",{style:{textAlign:"center",padding:"0.5rem",minWidth:70},children:"Qty"}),e.jsx("th",{style:{textAlign:"right",padding:"0.5rem",minWidth:100},children:"Price"})]})}),e.jsx("tbody",{children:t.items.map(r=>e.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[e.jsx("td",{style:{padding:"0.5rem",minWidth:120},children:r.name||r.part_id}),e.jsx("td",{style:{textAlign:"center",minWidth:70},children:r.qty}),e.jsxs("td",{style:{textAlign:"right",minWidth:100},children:["$",r.unit_price]})]},r.id))})]})]}):e.jsx("div",{style:{textAlign:"center",color:"#888"},children:"No order found."})]}),e.jsx(g,{})]})}export{y as default};
